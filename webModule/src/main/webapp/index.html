<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Contacts List</title>
    <script src="https://cdn.polyfill.io/v2/polyfill.js?features=fetch,Promise"></script>
    <script type="text/javascript" src="js/mustache.js"></script>
    <script type="text/javascript" src="js/utility.js"></script>
    <script type="text/javascript" src="js/mainForm.js"></script>
    <script type="text/javascript" src="js/createForm.js"></script>
    <script type="text/javascript" src="js/showFullContactInfo.js"></script>
    <script type="text/javascript" src="js/deleting.js"></script>
    <script type="text/javascript" src="js/editForm.js"></script>
    <script type="text/javascript" src="js/attachForm.js"></script>
    <script type="text/javascript" src="js/emailForm.js"></script>
    <script type="text/javascript" src="js/editAttachForm.js"></script>
    <script type="text/javascript" src="js/phoneForm.js"></script>
    <style>
        @import "css/header.css";
        @import "css/footer.css";
        @import "css/mainForm.css";
        @import "css/createForm.css";
        @import "css/editForm.css";
        @import "css/wrapper.css";
        @import "css/attachments.css";
        @import "css/emailForm.css";
        @import "css/fullContactInfoForm.css";
    </style>
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico"/>
    <script type="text/javascript">window.onload = showAllContacts;</script>
</head>
<body>
<div class="wrapper">
    <div class="header">
        <a class="title" onclick="showAllContacts()">Contacts List</a>
        <img src="images/search.png" alt="search icon" onclick="switchSearchFormVisibility();">
    </div>
    <div class="content">
        <div id="mainForm">
            <div id="searcher">
                <table>
                    <tr>
                        <td>
                            <label for="searchFirstName">First Name</label>
                            <input type="text" id="searchFirstName">
                        </td>
                        <td>
                            <label for="searchSurname">Surname</label>
                            <input type="text" id="searchSurname">
                        </td>
                        <td>
                            <label for="searchPatronymic">Patronymic</label>
                            <input type="text" id="searchPatronymic">
                        </td>
                        <td>
                            <label for="searchBirthDate1">Birth date (from)</label>
                            <input type="date" id="searchBirthDate1">
                        </td>
                        <td>
                            <label for="searchBirthDate2">Birth date (until)</label>
                            <input type="date" id="searchBirthDate2">
                        </td>
                        <td>
                            <label>Sex</label>
                            <fieldset id="sexSearchGroup">
                                <input type="radio" name="sexEditGroup" id="searchMale"/>
                                <label for="searchMale">Male</label><br>
                                <input type="radio" name="sexEditGroup" id="searchFemale"/>
                                <label for="searchFemale">Female</label>
                            </fieldset>
                        </td>
                        <td>
                            <label for="searchNationality">Nationality</label>
                            <input type="text" id="searchNationality">
                        </td>
                        <td>
                            <label>Family status</label>
                            <fieldset id="fsSearchGroup">
                                <p><input type="radio" name="fsEditGroup" id="searchSingle">Single</p>
                                <p><input type="radio" name="fsEditGroup" id="searchDivorced">Divorced</p>
                                <p><input type="radio" name="fsEditGroup" id="searchMarried">Married</p>
                            </fieldset>
                        </td>
                        <td>
                            <label for="searchCurrentWorkplace">Current workplace</label>
                            <input type="text" id="searchCurrentWorkplace">
                        </td>
                        <td>
                            <button class="button" onclick="searchContacts()">Search</button>
                            <button class="button" type="reset">Reset</button>
                        </td>
                    </tr>
                </table>
            </div>
            <script type="text/template" id="dynamicMainTable">
                <tr>
                    <th><input id="mainCheckbox" type="checkbox" onclick="selectAllCheckboxes('mainCheckbox',
                                    'mainTable')">Name
                    </th>
                    <th>Birth Date</th>
                    <th>Address</th>
                    <th>Current Workplace</th>
                    <th>Actions</th>
                </tr>
                {{#.}}
                <tr>
                    <td><input type="checkbox" value={{id}} onclick="selectCheckbox('mainCheckbox', 'mainTable');">
                        <a onclick="showFullContactInfoForm({{id}});">
                            {{firstName}} {{surname}} {{patronymic}}</a></td>
                    <td>{{birthDate}}</td>
                    <td>{{address.country}}, {{address.locality}}, {{address.street}}, {{address.house}},
                        {{address.apartment}}, {{address.postcode}}
                    </td>
                    <td>{{currentWorkplace}}</td>
                    <td>
                        <div id="images"><img src="images/edit.png" alt="edit" onclick="showEditForm({{id}});"/>
                            <img src="images/mail.png" alt="sendMail" onclick="showEmailForm({{id}});"/>
                            <img src="images/attachment.png" alt="attachments" onclick="showAllAttachments({{id}});"/>
                            <img src="images/delete.png" alt="delete" onclick="deleteContact({{id}});"/></div>
                    </td>
                </tr>
                {{/.}}
            </script>
            <table id="mainTable" style="border:1px solid black">
                <tbody></tbody>
            </table>
            <div class="majorButtons">
                <button type="button" class="button" onclick="showCreateForm()">Create new contact</button>
                <button type="button" class="button" onclick="showEmailForm()">Send email to selected contacts</button>
                <button type="button" class="button" onclick="deleteContacts()">Delete selected contacts</button>
            </div>
        </div>
        <div id="createForm">
            <div id="creator">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" placeholder="Enter first name here">
                <label for="surname">Surname</label>
                <input type="text" id="surname" placeholder="Enter last name here">
                <label for="patronymic">Patronymic</label>
                <input type="text" id="patronymic" placeholder="Enter patronymic here">
                <label for="birthDate">Birth date</label>
                <input type="date" id="birthDate" placeholder="Enter birth date here">
                <label>Sex</label>
                <fieldset id="sexGroup">
                    <p><input type="radio" id="male" name="sexGroup">Male</p>
                    <p><input type="radio" id="female" name="sexGroup">Female</p>
                </fieldset>
                <label for="nationality">Nationality</label>
                <input type="text" id="nationality" placeholder="Enter nationality here">
                <label>Family status</label>
                <fieldset id="fsGroup">
                    <p><input type="radio" name="fsGroup" id="single">Single</p>
                    <p><input type="radio" name="fsGroup" id="divorced">Divorced</p>
                    <p><input type="radio" name="fsGroup" id="married">Married</p>
                </fieldset>
                <label for="website">Website</label>
                <input type="url" id="website" placeholder="Enter website here">
                <label for="email">E-mail</label>
                <input type="email" id="email" placeholder="Enter email here">
                <label for="currentWorkplace">Current workplace</label>
                <input type="text" id="currentWorkplace" placeholder="Enter current workplace here">
                <label for="country">Country</label>
                <input type="text" id="country" placeholder="Enter country here">
                <label for="locality">Locality</label>
                <input type="text" id="locality" placeholder="Enter locality here">
                <label for="street">Street</label>
                <input type="text" id="street" placeholder="Enter street here">
                <label for="house">House</label>
                <input type="text" id="house" placeholder="Enter house here">
                <label for="apartment">Apartment</label>
                <input type="text" id="apartment" placeholder="Enter apartment here">
                <label for="postcode">Postcode</label>
                <input type="text" id="postcode" placeholder="Enter postcode here">
                <button type="submit" class="button" onclick="showCreateContactForm()">Submit</button>
                <button type="reset" class="button">Reset</button>
                <button class="button" onclick="showAllContacts()">Cancel</button>
            </div>
        </div>
        <div id="fullContactInfoForm">
            <script type="text/template" id="dynamicContact">
                <p id="hiddenContactId" hidden>{{id}}</p>
                <img id="fullContactInfoAvatar" src="" alt="avatar"/>
                <p>First Name: {{firstName}}</p>
                <p>Surname: {{surname}}</p>
                <p>Patronymic: {{patronymic}}</p>
                <p>Birth date: {{birthDate}}</p>
                <p>Sex: {{sex}}</p>
                <p>Nationality: {{nationality}}</p>
                <p>Family status: {{familyStatus}}</p>
                <p>Website: {{website}}</p>
                <p>E-mail: {{email}}</p>
                <p>Current workplace: {{currentWorkplace}}</p>
                <p>Country: {{address.country}}</p>
                <p>Locality: {{address.locality}}</p>
                <p>Street: {{address.street}}</p>
                <p>House: {{address.house}}</p>
                <p>Apartment: {{address.apartment}}</p>
                <p>Postcode: {{address.postcode}}</p>
                <button class="button" onclick="showEditForm({{id}});">Edit this contact</button>
                <button class="button" onclick="deleteContact({{id}});">Delete this contact</button>
                <button class="button" onclick="showAllContacts()">Cancel</button>
            </script>
            <div id="contact"></div>
            <script type="text/template" id="dynamicPhoneTable">
                <tr>
                    <th><input id="mainPhoneCheckbox" type="checkbox" onclick="selectAllCheckboxes('mainPhoneCheckbox',
                                    'mainPhoneTable')">Phone
                    </th>
                    <th>Description</th>
                    <th>Comment</th>
                    <th>Actions</th>
                </tr>
                {{#.}}
                <tr>
                    <td><input type="checkbox" value={{id}}
                               onclick="selectCheckbox('mainPhoneCheckbox', 'mainPhoneTable');">
                        +{{countryCode}}({{operatorsCode}}){{phoneNumber}}
                    </td>
                    <td>{{type}}</td>
                    <td>{{comment}}</td>
                    <td>
                        <div id=phoneImages">
                            <img src="/contactsList/images/edit.png" alt="edit" onclick="showPhoneEditForm({{id}});"/>
                            <img src="/contactsList/images/delete.png" alt="delete" onclick="deletePhone({{id}});"/>
                        </div>
                    </td>
                </tr>
                {{/.}}
            </script>
            <table id="mainPhoneTable" style="border:1px solid black">
                <tbody></tbody>
            </table>
            <div class="majorPhoneButtons">
                <button type="button" class="button" onclick="showCreatePhoneForm()">Create new phone</button>
                <button type="button" class="button" onclick="deletePhones()">Delete selected phones</button>
            </div>
        </div>
        <div id="editForm">
            <script type="text/template" id="dynamicContactEditor">
                <img id="editFormAvatar" src="" alt="avatarEditForm"/>
                <input id="avatar" type="file" class="button"/>
                <p><label for="editFirstName">First Name</label>
                    <input type="text" id="editFirstName" value={{firstName}}></p>
                <p><label for="editSurname">Surname</label>
                    <input type="text" id="editSurname" value={{surname}}></p>
                <p><label for="editPatronymic">Patronymic</label>
                    <input type="text" id="editPatronymic" value={{patronymic}}></p>
                <p><label for="editBirthDate">Birth date</label>
                    <input type="date" id="editBirthDate" value={{birthDate}}></p>
                <p><label>Sex</label>
                    <fieldset id="sexEditGroup">
                <p><input type="radio" name="sexEditGroup" id="editMale">Male</p>
                <p><input type="radio" name="sexEditGroup" id="editFemale">Female</p>
                </fieldset></p>
                <p><label for="editNationality">Nationality</label>
                    <input type="text" id="editNationality" value={{nationality}}></p>
                <p><label>Family status</label>
                    <fieldset id="fsEditGroup">
                <p><input type="radio" name="fsEditGroup" id="editSingle">Single</p>
                <p><input type="radio" name="fsEditGroup" id="editDivorced">Divorced</p>
                <p><input type="radio" name="fsEditGroup" id="editMarried">Married</p>
                </fieldset></p>
                <p><label for="editWebsite">Website</label>
                    <input type="url" id="editWebsite" value={{website}}></p>
                <p><label for="editEmail">E-mail</label>
                    <input type="email" id="editEmail" value={{email}}></p>
                <p><label for="editCurrentWorkplace">Current workplace</label>
                    <input type="text" id="editCurrentWorkplace" value={{currentWorkplace}}></p>
                <p><label for="editCountry">Country</label>
                    <input type="text" id="editCountry" value={{address.country}}></p>
                <p><label for="editLocality">Locality</label>
                    <input type="text" id="editLocality" value={{address.locality}}></p>
                <p><label for="editStreet">Street</label>
                    <input type="text" id="editStreet" value={{address.street}}></p>
                <p><label for="editHouse">House</label>
                    <input type="text" id="editHouse" value={{address.house}}></p>
                <p><label for="editApartment">Apartment</label>
                    <input type="text" id="editApartment" value={{address.apartment}}></p>
                <p><label for="editPostcode">Postcode</label>
                    <input type="text" id="editPostcode" value={{address.postcode}}></p>
                <p>
                    <button class="button" onclick="editContact({{id}});">Submit</button>
                    <button class="button" type="reset">Reset</button>
                    <button class="button" onclick="showAllContacts()">Cancel</button>
                </p>
            </script>
            <div id="editor"></div>
        </div>
        <div id="attachmentsForm">
            <script type="text/template" id="dynamicAttachTable">
                <tr>
                    <th><input id="attachCheckbox" type="checkbox" onclick="selectAllCheckboxes('attachCheckbox',
                                'attachTable')">Title
                    </th>
                    <th>Type</th>
                    <th>Size</th>
                    <th>Last update</th>
                    <th>Actions</th>
                </tr>
                {{#.}}
                <tr>
                    <td><input type="checkbox" onclick="selectCheckbox('attachCheckbox', 'attachTable');"
                               value={{id}}>{{title}}
                    </td>
                    <td>{{type}}</td>
                    <td>{{size}}</td>
                    <td>{{lastUpdate}}</td>
                    <td>
                        <div id="atttachImages">
                            <img src="/contactsList/images/edit.png" alt="edit" onclick="showEditAttachForm({{id}});"/>
                            <img src="/contactsList/images/download.png" alt="download"
                                 onclick="downloadAttach({{id}});"/>
                            <img src="/contactsList/images/delete.png" alt="delete" onclick="deleteAttach({{id}});"/>
                        </div>
                    </td>
                </tr>
                {{/.}}
            </script>
            <table id="attachTable" style="border:1px solid black">
                <tbody></tbody>
            </table>
            <div class="majorAttachButtons">
                <input id="attachField" type="file" class="button"/>
                <button type="button" class="button" onclick="uploadAttach(document
                            .getElementById('attachCheckbox').value)">Upload attachment
                </button>
                <button type="button" class="button" onclick="deleteAttachs(document.getElementById('attachCheckbox')
                            .value)">Delete selected attachments
                </button>
            </div>
        </div>
        <div id="emailForm">
            <script type="text/template" id="dynamicSendList">
                {{#.}}
                {{email}}
                {{/.}}
            </script>
            <p id="sendTo">
            </p>
            <p><label for="emailSubject">Subject</label>
                <input type="text" id="emailSubject"></p>
            <p>
                <label>Select template text:
                    <script type="text/template" id="dynamicTemplateSelect">
                        <option selected></option>
                        {{#.}}
                        <option value="{{text}}">{{title}}</option>
                        {{/.}}
                    </script>
                    <select id="templateSelect" onchange="changeOption(value);">
                    </select>
                </label>
            </p>
            <p>
                <label for="emailText">E-mail text
                    <textarea id="emailText"></textarea>
                </label>
            </p>
            <p>
                <button class="button" onclick="sendEmail()">Send e-mail</button>
                <button class="button" type="reset">Reset</button>
                <button class="button" type="reset" onclick="showAllContacts()">Cancel</button>
            </p>
        </div>
        <div id="editAttachForm">
            <script type="text/template" id="dynamicAttachEditor">
                <p id="hiddenId" hidden>{{id}}</p>
                <p id="hiddenUserId" hidden>{{userId}}</p>
                <p id="hiddenFileType" hidden>{{type}}</p>
                <p><label for="editAttachTitle">File title</label>
                    <input type="text" id="editAttachTitle" value={{title}}></p>
                <p><label for="attachComment">Comment
                    <textarea id="attachComment">{{comment}}</textarea>
                </label>
                </p>
                <p>
                    <button class="button" onclick="editAttach({{id}});">Submit</button>
                    <button class="button" type="reset">Reset</button>
                    <button class="button" onclick="showAllAttachments({{userId}});">Cancel</button>
                </p>
            </script>
            <div id="attachEditor"></div>
        </div>
        <div id="editPhoneForm">
            <script type="text/template" id="dynamicPhoneEditor">
                <p id="hiddenPhoneUserId" hidden>{{contactId}}</p>
                <p><label for="editCountryCode">Country code</label>
                    <input type="number" id="editCountryCode" value={{countryCode}}></p>
                <p><label for="editOperatorsCode">Operator's code</label>
                    <input type="number" id="editOperatorsCode" value={{operatorsCode}}></p>
                <p><label for="editPhoneNumber">Phone number</label>
                    <input type="number" id="editPhoneNumber" value={{phoneNumber}}></p>
                <p><label>Type</label>
                    <fieldset id="phoneTypeEditGroup">
                <p><input type="radio" name="phoneTypeEditGroup" id="editHome">Home</p>
                <p><input type="radio" name="phoneTypeEditGroup" id="editMobile">Mobile</p>
                </fieldset></p>
                <p><label for="phoneComment">Comment
                    <textarea id="phoneComment">{{comment}}</textarea>
                <p>
                    <button class="button" onclick="editPhone({{id}});">Submit</button>
                    <button class="button" type="reset">Reset</button>
                    <button class="button" onclick="showFullContactInfoForm({{contactId}});">Cancel</button>
                </p>
            </script>
            <div id="phoneEditor"></div>
        </div>
        <div id="createPhoneForm">
            <div id="phoneCreator">
                <p id="contactId" hidden></p>
                <label for="countryCode">Country code</label>
                <input type="number" id="countryCode" placeholder="Enter country here">
                <label for="operatorsCode">Operator's code</label>
                <input type="number" id="operatorsCode" placeholder="Enter operator's code here">
                <label for="phoneNumber">Phone number</label>
                <input type="number" id="phoneNumber" placeholder="Enter phone number here">
                <label>Type</label>
                <fieldset id="phoneTypeCreateGroup">
                    <p><input type="radio" id="home" name="phoneTypeCreateGroup">Home</p>
                    <p><input type="radio" id="mobile" name="phoneTypeCreateGroup">Mobile</p>
                </fieldset>
                <label for="phoneCreateComment">Comment
                    <textarea id="phoneCreateComment"></textarea>
                    <button type="submit" class="button" onclick="createPhone()">Submit</button>
                    <button type="reset" class="button">Reset</button>
                    <button class="button" onclick="showAllContacts()">Cancel</button>
                </label>
            </div>
        </div>
    </div>
    <div class="footer">
        <a class="foot-text">created by Kirill Karpuk</a>
    </div>
</div>
</body>
</html>